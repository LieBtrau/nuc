Version 4
SHEET 1 1624 680
WIRE -48 -192 -192 -192
WIRE -656 -16 -960 -16
WIRE -384 -16 -656 -16
WIRE -48 -16 -48 -192
WIRE -48 -16 -384 -16
WIRE 32 -16 -48 -16
WIRE 96 -16 32 -16
WIRE 256 -16 96 -16
WIRE 432 -16 256 -16
WIRE 736 -16 528 -16
WIRE -656 32 -656 -16
WIRE -384 80 -384 64
WIRE -96 80 -384 80
WIRE -656 112 -768 112
WIRE -464 112 -656 112
WIRE -272 112 -464 112
WIRE 32 112 32 -16
WIRE 432 128 432 -16
WIRE 512 128 512 32
WIRE -272 144 -272 112
WIRE 256 144 256 -16
WIRE 736 144 736 -16
WIRE 800 144 736 144
WIRE 1024 144 800 144
WIRE -656 160 -656 112
WIRE 96 160 96 64
WIRE 736 160 736 144
WIRE -464 192 -624 192
WIRE 1024 192 1024 144
WIRE -960 208 -960 -16
WIRE -768 208 -768 112
WIRE 432 208 512 128
WIRE 512 208 432 128
WIRE 96 224 96 160
WIRE 800 224 736 224
WIRE 736 240 736 224
WIRE 256 256 256 224
WIRE 256 256 128 256
WIRE -656 272 -656 224
WIRE 256 272 256 256
WIRE 800 304 736 304
WIRE 512 320 512 208
WIRE -960 336 -960 288
WIRE -384 352 -384 80
WIRE 96 368 96 288
WIRE 256 368 256 352
WIRE 256 368 96 368
WIRE 432 368 432 208
WIRE 432 368 256 368
WIRE 736 368 528 368
WIRE 1024 368 1024 272
WIRE 1024 368 736 368
WIRE -272 384 -272 224
WIRE -272 384 -352 384
WIRE -176 384 -272 384
WIRE 32 384 32 208
WIRE 32 384 -176 384
WIRE 96 400 96 368
WIRE -960 480 -960 400
WIRE -384 480 -384 416
WIRE -96 480 -96 80
WIRE 48 480 -96 480
WIRE -768 512 -768 288
WIRE -768 512 -928 512
WIRE -656 512 -768 512
WIRE -272 512 -272 464
WIRE -272 512 -576 512
WIRE -176 512 -176 464
WIRE -176 512 -272 512
WIRE 96 512 96 496
WIRE 96 512 -176 512
WIRE 96 528 96 512
WIRE -960 608 -960 544
FLAG -384 480 0
FLAG 96 608 0
FLAG -464 272 0
FLAG -656 272 0
FLAG -192 -112 0
FLAG -960 608 0
SYMBOL TLV431 -384 384 R0
SYMATTR InstName U1
SYMBOL res 80 512 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL res -368 80 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 3.3K
SYMBOL voltage -192 -208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 4.5
SYMBOL res -192 480 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 68K
SYMBOL res -256 240 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 150k
SYMBOL cap 752 160 M0
SYMATTR InstName C1
SYMATTR Value 1
SYMBOL cap 752 240 M0
SYMATTR InstName C2
SYMATTR Value 1
SYMBOL cap 752 304 M0
SYMATTR InstName C3
SYMATTR Value 1
SYMBOL TLV431 -656 192 R0
SYMATTR InstName U3
SYMBOL res -448 288 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 68K
SYMBOL res -640 128 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 220
SYMBOL res -448 96 M0
SYMATTR InstName R10
SYMATTR Value 150K
SYMBOL res -288 480 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 360K
SYMBOL TLV431 96 256 R0
SYMATTR InstName U4
SYMBOL res 272 128 M0
SYMATTR InstName R6
SYMATTR Value 36K
SYMBOL res 272 256 M0
SYMATTR InstName R7
SYMATTR Value 15K
SYMBOL pnp 96 208 R180
SYMATTR InstName Q1
SYMATTR Value BC857B
SYMBOL res 112 -32 M0
SYMATTR InstName R12
SYMATTR Value 3.3K
SYMBOL PSMN069-100YS 48 400 R0
SYMATTR InstName U2
SYMBOL res 784 128 R0
SYMATTR InstName R13
SYMATTR Value 10meg
SYMBOL res 784 208 R0
SYMATTR InstName R14
SYMATTR Value 10meg
SYMBOL pmos 432 32 R270
SYMATTR InstName M1
SYMATTR Value RSQ035P03
SYMBOL PSMN069-100YS 432 320 M90
SYMATTR InstName U5
SYMBOL TLV431 -960 512 R0
SYMATTR InstName U6
SYMBOL res -944 304 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 220
SYMBOL LED -976 336 R0
SYMATTR InstName D1
SYMATTR Value NSCW100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -752 304 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R16
SYMATTR Value 150K
SYMBOL res -560 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 68K
TEXT 792 0 Left 2 !;op
TEXT 792 -24 Left 2 !.tran 0 10 0.01 uic
TEXT -832 -464 Left 2 ;Reference voltage set at 4.0V: needed, so that charging current is less dependent on supply voltage: R8, R9, R10, U3
TEXT -832 -440 Left 2 ;Charge current control set at 200mA: R1, R2, R3, R4, R11, U1, U2
TEXT -832 -416 Left 2 ;Overvoltage protection set at 4.2V: R6, R7, R12, U4, Q1
TEXT -832 -392 Left 2 ;Charger disconnect protection: protects the charger, containing charged batteries, when not connected to the power supply: M1, U5
TEXT -832 -368 Left 2 ;Batteries that must be charged (simple spice model): C1, C2, C3
TEXT -832 -344 Left 2 ;Components to suppress Spice warnings: R13, R14
TEXT -832 -320 Left 2 ;U2, U5, M1: can be any low RdsOn, low Vth. MOSFET
TEXT -832 -296 Left 2 ;Charging LED indicator: R5, R15, R16, D1, U6.
TEXT -832 -488 Left 2 ;Supply voltage V1: [4.5 5.5] V : meant for USB-port, connect D- to D+ of USB connector.
