Version 4
SHEET 1 1624 680
WIRE -48 -192 -192 -192
WIRE -800 -16 -944 -16
WIRE -400 -16 -800 -16
WIRE -48 -16 -48 -192
WIRE -48 -16 -400 -16
WIRE 32 -16 -48 -16
WIRE 96 -16 32 -16
WIRE 256 -16 96 -16
WIRE 368 -16 256 -16
WIRE 432 -16 368 -16
WIRE 576 -16 528 -16
WIRE 736 -16 576 -16
WIRE -944 0 -944 -16
WIRE -800 0 -800 -16
WIRE -608 80 -800 80
WIRE -480 80 -608 80
WIRE 32 112 32 -16
WIRE -944 128 -944 80
WIRE -800 128 -800 80
WIRE 432 128 432 -16
WIRE 512 128 512 32
WIRE 256 144 256 -16
WIRE 736 144 736 -16
WIRE 800 144 736 144
WIRE 1024 144 800 144
WIRE -608 160 -768 160
WIRE 96 160 96 64
WIRE 736 160 736 144
WIRE -480 176 -480 80
WIRE 1024 192 1024 144
WIRE 432 208 512 128
WIRE 512 208 432 128
WIRE -400 224 -400 64
WIRE -80 224 -400 224
WIRE 96 224 96 160
WIRE 800 224 736 224
WIRE -944 240 -944 192
WIRE -800 240 -800 192
WIRE 736 240 736 224
WIRE 256 256 256 224
WIRE 256 256 128 256
WIRE -752 272 -912 272
WIRE -480 272 -480 256
WIRE -272 272 -480 272
WIRE 256 272 256 256
WIRE 800 304 736 304
WIRE 512 320 512 208
WIRE -400 352 -400 224
WIRE -944 368 -944 304
WIRE 96 368 96 288
WIRE 256 368 256 352
WIRE 256 368 96 368
WIRE 432 368 432 208
WIRE 432 368 256 368
WIRE 736 368 528 368
WIRE 1024 368 1024 272
WIRE 1024 368 736 368
WIRE -272 384 -272 352
WIRE -272 384 -368 384
WIRE -176 384 -272 384
WIRE 32 384 32 208
WIRE 32 384 -176 384
WIRE 96 400 96 368
WIRE -400 480 -400 416
WIRE -80 480 -80 224
WIRE 48 480 -80 480
WIRE -272 512 -272 464
WIRE -176 512 -176 464
WIRE -176 512 -272 512
WIRE 96 512 96 496
WIRE 96 512 -176 512
WIRE 96 528 96 512
FLAG -400 480 0
FLAG 96 608 0
FLAG -608 240 0
FLAG -800 240 0
FLAG 368 -16 1A
FLAG 576 -16 1B
FLAG -192 -112 0
FLAG -944 368 0
SYMBOL TLV431 -400 384 R0
SYMATTR InstName U1
SYMBOL res 80 512 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL res -384 80 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 15K
SYMBOL voltage -192 -208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 4.5
SYMBOL res -192 480 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 68K
SYMBOL res -464 272 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 150k
SYMBOL cap 752 160 M0
SYMATTR InstName C1
SYMATTR Value 1
SYMBOL cap 752 240 M0
SYMATTR InstName C2
SYMATTR Value 1
SYMBOL cap 752 304 M0
SYMATTR InstName C3
SYMATTR Value 1
SYMBOL res -256 368 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 1K
SYMBOL TLV431 -800 160 R0
SYMATTR InstName U3
SYMBOL res -592 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 68K
SYMBOL res -784 96 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 220
SYMBOL res -592 64 M0
SYMATTR InstName R10
SYMATTR Value 150K
SYMBOL res -288 480 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 390K
SYMBOL TLV431 96 256 R0
SYMATTR InstName U4
SYMBOL res 272 128 M0
SYMATTR InstName R6
SYMATTR Value 36K
SYMBOL res 272 256 M0
SYMATTR InstName R7
SYMATTR Value 15K
SYMBOL pnp 96 208 R180
SYMATTR InstName Q1
SYMATTR Value BC857B
SYMBOL res 112 -32 M0
SYMATTR InstName R12
SYMATTR Value 1K
SYMBOL PSMN069-100YS 48 400 R0
SYMATTR InstName U2
SYMBOL res 784 128 R0
SYMATTR InstName R13
SYMATTR Value 10meg
SYMBOL res 784 208 R0
SYMATTR InstName R14
SYMATTR Value 10meg
SYMBOL pmos 432 32 R270
SYMATTR InstName M1
SYMATTR Value RSQ035P03
SYMBOL PSMN069-100YS 432 320 M90
SYMATTR InstName U5
SYMBOL TLV431 -944 272 R0
SYMATTR InstName U6
SYMBOL res -928 96 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 220
SYMBOL LED -960 128 R0
SYMATTR InstName D1
SYMATTR Value NSCW100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -656 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 150K
TEXT 792 0 Left 2 !;op
TEXT 792 -24 Left 2 !.tran 0 10 0.01 uic
TEXT -832 -464 Left 2 ;Reference voltage: needed, so that charging current is less dependent on supply voltage: R8, R9, R10, U3
TEXT -832 -440 Left 2 ;Charge current control: R1, R2, R3, R4, R5, R11, U1, U2
TEXT -832 -416 Left 2 ;Overvoltage protection: R6, R7, R12, U4, Q1
TEXT -832 -392 Left 2 ;Charger disconnect protection: protects the charger containing charged batteries when not connected to the power supply: M1, U5
TEXT -832 -368 Left 2 ;Batteries that must be charged (simple spice model): C1, C2, C3
TEXT -832 -344 Left 2 ;Components to suppress Spice warnings: R13, R14
TEXT -832 -320 Left 2 ;U2, U5, M1: can be any low RdsOn, low Vth. MOSFET
